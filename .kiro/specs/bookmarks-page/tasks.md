# ブックマーク一覧画面 実装タスク

- [x] 1. Server Actionsの実装
  - `/src/app/actions/bookmarks.ts` を作成し、ブックマーク取得・削除のServer Actionsを実装する
  - `getBookmarkedArticles`: ユーザーのブックマーク一覧を取得（ページネーション対応）
  - `removeBookmark`: ブックマークを削除
  - 既存の `feedItemToArticle` 変換関数を再利用
  - _要件: 1.1, 1.3, 2.1, 2.2, 3.3_

- [x] 2. 空状態コンポーネントの実装
  - `/src/features/bookmarks/components/bookmarks-empty.tsx` を作成
  - ブックマークが存在しない場合の表示を実装
  - フィードへのリンクボタンを含める
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 2.1 空状態コンポーネントのStorybook作成
  - `bookmarks-empty.stories.tsx` を作成
  - デフォルト状態のストーリーを実装
  - _要件: 5.1_

- [x] 3. エラー状態コンポーネントの実装
  - `/src/features/bookmarks/components/bookmarks-error.tsx` を作成
  - エラーメッセージと再試行ボタンを表示
  - _要件: 7.1, 7.2, 7.3_

- [x] 3.1 エラー状態コンポーネントのStorybook作成
  - `bookmarks-error.stories.tsx` を作成
  - 各種エラーパターンのストーリーを実装
  - _要件: 7.1_

- [x] 4. ブックマークカードコンポーネントの実装
  - `/src/features/bookmarks/components/bookmark-card.tsx` を作成
  - サムネイル、タイトル、説明、メタ情報を表示
  - 削除ボタンと確認ダイアログを実装
  - 外部リンクボタン（RSS記事の場合）を実装
  - _要件: 2.2, 2.3, 2.4, 3.1, 3.2, 4.1, 4.2, 4.3_

- [x] 4.1 ブックマークカードのStorybook作成
  - `bookmark-card.stories.tsx` を作成
  - RSS記事とユーザー投稿の両パターンを実装
  - 削除中状態のストーリーを実装
  - _要件: 2.2, 2.4_

- [x] 5. ブックマーク一覧コンポーネントの実装
  - `/src/features/bookmarks/components/bookmarks-list.tsx` を作成
  - レスポンシブグリッドレイアウトを実装（1/2/3カラム）
  - 無限スクロール機能を実装（Intersection Observer使用）
  - ローディングスピナーを表示
  - _要件: 2.1, 2.5, 6.1, 6.2, 8.1, 8.2, 8.3_

- [x] 5.1 ブックマーク一覧のStorybook作成
  - `bookmarks-list.stories.tsx` を作成
  - 複数アイテム表示のストーリーを実装
  - ローディング状態のストーリーを実装
  - レスポンシブ表示の確認
  - _要件: 2.1, 8.1, 8.2, 8.3_

- [x] 6. クライアントコンポーネントの実装
  - `/src/app/bookmarks/client-bookmarks.tsx` を作成
  - 状態管理（データ、エラー、ローディング）を実装
  - ブックマーク削除ハンドラーを実装（楽観的UI更新）
  - ページネーション（無限スクロール）ハンドラーを実装
  - 条件分岐で適切なコンポーネントを表示（空状態/エラー/通常）
  - _要件: 3.3, 3.4, 3.5, 6.4, 7.3, 9.2, 9.5_

- [x] 7. ページコンポーネントの実装
  - `/src/app/bookmarks/page.tsx` を作成
  - 認証チェックを実装（未認証時はログインページへリダイレクト）
  - 初期データ取得を実装
  - クライアントコンポーネントに初期データを渡す
  - ページメタデータ（title, description）を設定
  - _要件: 1.1, 1.2, 1.3_

- [x] 8. 型定義の作成
  - `/src/features/bookmarks/types/index.ts` を作成
  - 必要な型定義をエクスポート（既存のArticle型を再利用）
  - _要件: 2.2_

- [x] 9. ナビゲーションの動作確認
  - ボトムナビゲーションとサイドバーナビゲーションからブックマークページへの遷移を確認
  - アクティブ状態の表示を確認
  - _要件: 4.1, 4.2_

- [ ]* 10. アクセシビリティの検証
  - キーボードナビゲーションの動作確認
  - スクリーンリーダーでの読み上げ確認
  - カラーコントラスト比の検証
  - フォーカス状態の視覚的確認
  - _要件: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ]* 11. パフォーマンステスト
  - 初回データ取得時間の計測（2秒以内）
  - 削除操作の応答時間計測（1秒以内）
  - 画像遅延読み込みの動作確認
  - 大量データ（100件以上）での動作確認
  - _要件: 9.1, 9.2, 9.3, 9.4_

- [ ]* 12. エラーハンドリングのテスト
  - ネットワークエラー時の表示確認
  - 再試行機能の動作確認
  - 削除失敗時のロールバック確認
  - タイムアウト時の表示確認
  - _要件: 7.1, 7.2, 7.3, 7.4, 7.5_
